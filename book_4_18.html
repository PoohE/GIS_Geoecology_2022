<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>mspa analysis</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<style>

{*/
  box-sizing: border-box;

}

figure {
    width: 50%; /* Ширина если надо расположить 2 картинки в ряд*/
    float: left; /* Выстраиваем элементы по горизонтали */
    margin: 0 0 0 0%; /* Отступ слева */
   text-indent: 0px; /* убираем отступ для картинки как ни странно */
   /* background: #f0f0f0; /* Цвет фона */
    border-radius: 1px; /* Радиус скругления */
    padding: 0%; /* Поля */
   }
   figure:first-child {
    margin-left: 0; /* Убираем отступ для первого элемента */
   }

picture {
 width: 33%; /* Ширина если надо расположить 3 картинки в ряд*/
    float: center; /* Выстраиваем элементы по горизонтали */
    margin: 0 0 0 0%; /* Отступ слева */
   text-indent: 0px; /* убираем отступ для картинки как ни странно */
   /* background: #f0f0f0; /* Цвет фона */
    border-radius: 1px; /* Радиус скругления */
    padding: 0%; /* Поля */
}
picture:first-child {
    margin-left: 0; /* Убираем отступ для первого элемента */
   }

   image {
    width: 100%; /* Ширина если надо расположить 1 картинки в ряд*/
    float: left; /* Выстраиваем элементы по горизонтали */
    margin: 0 0 0 0%; /* Отступ слева */
   text-indent: 0px; /* убираем отступ для картинки как ни странно */
   /* background: #f0f0f0; /* Цвет фона */
    border-radius: 1px; /* Радиус скругления */
    padding: 1%; /* Поля */
   }
</style>
</head>

<div class="sidenav">

   <a href="#h1">IV. ГЕОИНФОРМАЦИОННОЕ МОДЕЛИРОВАНИЕ В ЛАНДШАФТНОЙ ЭКОЛОГИИ</a>

	<a href="#h2">18. СТРУКТУРНЫЙ АНАЛИЗ КАК АЛЬТЕРНАТИВНЫЙ ГИС-МЕТОД В ЛАНДШАФТНОЙ ЭКОЛОГИИ</a>

    <a href="#h3_1">18.1. Теория графов и структурный пространственный анализ</a>
	<a href="#h3_2">18.2. Программа MSPA Guidos Tool Box</a>
	<a href="#h3_3">18.3. Группа Object - расчеты представленности классов различной размерности и метрики парцелляции</a>
	<a href="#h3_4">18.4. Группа Pattern - морфологический пространственный анализ</a>
	<a href="#h3_5">18.5. Группа Fragmentation - фрагментация</a>
	<a href="#hh3_6">18.6. Группа Distance - определение расстояний, доступности и зон влияния</a>
	<a href="#h3_7">18.7. Реализация темы MSPA анализа в ArcGIS</a>
	<a href="#h3_8">18.8. Реализация темы MSPA анализа в SAGA GIS</a>

</div class="sidenav">

<div class="content">

   <h1 id="h1">IV. ГЕОИНФОРМАЦИОННОЕ МОДЕЛИРОВАНИЕ В ЛАНДШАФТНОЙ ЭКОЛОГИИ</h1>

	<h2 id="h2">18. СТРУКТУРНЫЙ АНАЛИЗ КАК АЛЬТЕРНАТИВНЫЙ ГИС-МЕТОД В ЛАНДШАФТНОЙ ЭКОЛОГИИ</h2>

	<h3 id="h3_1">18.1. Теория графов и структурный пространственный анализ</h3>

<p>Прошедшие два десятилетия нового века были временем широкого использования ландшафтных метрик, так или иначе связанных с методологией <span class="blackbold">Fragstat</span> <a href="BIBLIO.html#McGarigal_Marks_1995">[McGarigal, Marks, 1995]</a>. Возникли новые потребности, вызванные экологизацией процедур территориального и градостроительного планирования, в частности - необходимость оценки качественных и количественных параметров так называемых региональных экологических каркасов, и зеленой инфраструктуры городов.</p>

<p>Однако попытки прямого применения методик <span class="blackbold">FRAGSTAT</span> и <span class="blackbold">Patch Analyst</span> в новой сфере натолкнулись на сложность интерпретации результатов, поскольку первоначально  ландшафтные метрики создавались для характеристики фрагментированности местообитаний различных видов флоры и фауны. По этой причине несколько позже в  рамках ландшафтной экологии  началась разработка альтернативных методов, базирующихся на иной, т.е., не «патчевой» математике, среди которых выделились и получили распространение алгоритмы, основанные на теории графов, получившее общее название <span class="blackbold">Morphological Spatial Pattern Analysis (MSPA)</span>  что можно перевести как  «Морфологический (Структурный) Анализ Пространственных Паттернов» <a href="BIBLIO.html#Minor_Urban_2008">[Minor, Urban, 2008]</a>.</p>

<p>Теория графов позволяет рассматривать элементы зеленой инфраструктуры (ЗИ) как сеть, состоящую из более-менее обширных «узлов»: областей естественной растительности, открытых пространств и линейных связей-коридоров между ними <a href="BIBLIO.html#Meerow_Newell_2017">[Meerow, Newell, 2017;</a> <a href="BIBLIO.html#Lookingbill_Minor_2017">Lookingbill, Minor, 2017]</a>. Таким образом в центре внимания методики <span class="blackbold">MSPA</span> оказывается комплексная оценка сложно формализуемого качества соединенности-взаимосвязанности (connectivity/coherence) фрагментов "живой природы"; для параметризации этого качества предложены различные индексы, благодаря использованию которых  <span class="blackbold">MSPA</span> обеспечивает гибкий подход к анализу пространственных моделей <a href="BIBLIO.html#Qiu_et_al_2013">[Qiu, Chang, Wang, 2013]</a>.</p>

<p>В ходе изучения урбанизированных территорий выделился еще один важный  и значимый для социума параметр, оцениваемый с помощью <span class="blackbold">MSPA</span> <span class="bolditalic">accessibility|доступность</span>, который в сочетании с так называемым <span class="bolditalic">space index|пространственным синтаксисом</span> определяет возможность рекреационного использования элементов ЗИ <a href="BIBLIO.html#Zhao_et_al_2017">[Zhao et al., 2017]</a>.</p>
<br>

<h3 id="h3_2">18.2. Программа MSPA Guidos Tool Box</h3>

<p>На сегодняшний день компоненты <span class="blackbold">MSPA</span>-анализа реализованы в качестве отдельных инструментов и модулей практически во всех наиболее популярных ГИС-пакетах (<span class="blue">SAGA GIS</span>, GRASS, <span class="red">ArcMAP10.x</span>, <span class="gold">QGIS</span>), однако наиболее полный набор возможностей предоставляет отдельная свободно распространяемая программа <a href="http://forest.jrc.ec.europa.eu/download/software/guidos"><span class="backbold">Guidos Tool Box (GTB)</span></a>  - <span class="blackbold">The Graphical User Interface for the Description of Objects and their Shapes Toolbox</span> – <a href="BIBLIO.html#Vogt_Riitters_2017">[Vogt,  Riitters, 2017]</a>.  

<p><span class="blackbold">GTB</span> работает с бинарными растровыми файлами (исходные данные - классифицированный гомогенный дихотомический растр), в которых информация предоставлена в виде трех значений «передний план» <span class="greencursiv">2</span>, т.е., собственно зеленые насаждения, и «фон» <span class="greencursiv">1</span>, к которому относится все остальные без разделения виды землепользования – запечатанные поверхности, строения и т.д., и <span class="greencursiv">0 - NoData</span>.</p>

<p>Возможности инструментария <span class="blackbold">GTB</span> демонстрируются в данном разделе  на примере Старой Москвы. В качестве исходного материала использован растр университета Мэриленда <a href="https://storage.googleapis.com/earthenginepartners-hansen/GFC-2019-v1.7/Hansen_GFC-2019-v1.7_treecover2000_40N_080W.tif ">Tree Cover</a>    преобразованный в необходимый формат (<span class="cursive">8 bit, «Foreground and Background»</span>). Для окончательной обработки растра необходимо запустить инструмент <span class="blackbold">Recode</span> блока <span class="blackbold">Preprocessing</span> и привести растр к значениям <span class="greencursiv">«0»</span> - нет данных, <span class="greencursiv">«1»</span> - фон,  <span class="greencursiv">«2»</span> - элементы ЗИ), а затем сохранить файл как <span class="backgreen">Geotiff.</span>

<p>Основной блок инструментов <span class="blackbold">GTB Image Analysis</span> включает шесть групп инструментов <a href="Pict_4_18/01_gtb-vid.png">(Рис. 18. 1)</a>.</p>

<img src="Pict_4_18/01_gtb-vid.png" width="400" height="relative">
<br><span class="imgtitle">Рис. 18.1 Общий вид программы GTB с загруженным растром Москвы, преобразованным из Tree Cover, и меню основных инструментов</span></p>
<br>

<br><span class="imgtitle">Таблица 18.1 Группы основных инструментов GTB и их назначение

<table id="customers">
      <table border="1">
        <tr>
            <th>Группа Инструментов</th>
            <th>Инструменты</th>
				<th>Назначение</th>
         	        </tr>
        <tr>
        		<td>Object|<br>Объект</td>
            <td>1) Accounting|<br> Расчет, <br>2) Parcellation|<br>Парцелляция), <br>3)Contortion|<br> Искажение</td>
            <td>1) Расчет по классам размерности;<br>
            2) Расчет ряда индексов фрагментированности (средняя и взвешенная площадь классов и др.) для объектов "переднего плана" и "фона";<br>
         	3) Искажение периметра (используется для описании формы объектов)</td>
         </tr>
			<tr>
        		<td>Pattern|<br>Паттерн</td>
            <td>1) Morhpological|<br>Структурный анализ, <br>2) Moving Window| <br> Анализ "движущеся окна",</td>
            <td>1) SPA и MSPA - анализ, выявление и расчет элементов структуры "переднего плана" и "фона";<br>
            2) LM - Ландшафтная мозаика, PP - степень сцепленности для единственного класса, Shannon/SumD - сцепленность-связность для всех классов изображения</td>
         </tr>
         <tr>
        		<td>Fragmentation|<br>Фрагментация</td>
            <td>1) Index| Индекс, <br>2) Entropy|  Энтропия, <br>3) Hypsometry|<br>Гипсометрия</td>
            <td>1) Определение нормализованной фрагментации для всего изображения в целом;<br>
            2) Расчет показателя энтропии;<br>
         	3) Расчет нормализованной гипсометрической кривой, отображающей среднюю и максимальную дистанцию между объектами переднего плана и объектами фона</td>
         </tr>
         <tr>
        		<td>Distance|<br>Расстояние</td>
            <td>1) Euclidean Distance|Эвклидово расстояние <br>2) Influence Zone| <br>Зоны влияния,<br>3)Proximity| Близость</td>
            <td>1) Эвклидово расстояние до объектов переднего плана<br>
            2) Делимитация ареалов влияния элементов переднего плана;<br>
         	3) Расчет кратчайшего расстояния, необходимого для соединения соседних объектов;</td>
         </tr>
         <tr>
        		<td>Cost|<br>Взвешенное расстояние</td>
            <td>1) Cost Map A|Карта взвешенных расстояний объекта A<br> 2) Cost MAP AB| Карта взвешенных расстояний объектов AB, <br>3) Reconnect| Восстановление связи</td>
            <td>1) Расчет взвешенного расстояния от объекта A);<br>
            2) Расчет взвешенного расстояния и кратчайшего пути между объектами A и B;<br>
         	3) Выявление кратчайших соединяющих путей или последовательных "станций" между двумя точками</td>
         </tr>
</table>
<br>


<h3 id="h3_3">18.3. Группа Object - расчеты представленности классов различной размерности и метрики парцелляции</h3>

<p><span class="blackbold">Accounting|Расчет по классам размерности</span>: Инструмент позволяет дифференцировать все фрагменты "переднего плана", т.е., пиксели растра со значением <span class="greencursiv">1</span> на 6 классов в соответствии с принятыми (экспертом) пороговыми значениями. Инструмент предварительно настраивается в соответствии с масштабом: в нашем случае это растр <span class="backgreen">Tree Cover</span> с размером пикселя <span class="greencursiv">16 м</span>; данное значение, указывается в позицию <span class="cursive">Pixel Resolution</span>, после чего необходимо произвести пересчет, нажав на <span class="monospace">Reset</span> в правой (управляющей) части панели <span class="monospace">Accounting Setting|Установки расчета</span>.  Другая изменяемая опция – <span class="cursive">Число направлений связности</span> (<span class="greencursiv">4</span> или <span class="greencursiv">8</span>).</p> 

<img src="Pict_4_18/02_accuonting.png" width="90%" height="relative">
<br><span class="imgtitle">Рис. 18.2 Опции настройки и результаты работы инструмента Accounting: шесть размерных классов с величиной площади в пикселях, гектарах и акрах


<p> После нажатия кнопки  <span class="monospace">Accept|Принять</span>  в правой (управляющей) части панели исходная карта раскрашивается в цвета классов размерности превращаясь в растровая карта (color map) с объектами шести классов размерности <a href="Pict_4_18/03_accountmap.png">(Рис. 18.3)</a> и одновременно выводится таблица результатов <a href="Pict_4_18/03_accounttable.png">(Рис. 18.4)</a> в формате <span class="monospace">txt</span>,  которая может быть сохранена отдельно.</p>

<img src="Pict_4_18/03_accountmap.png"  width="55%" height="relative">
<br><span class="imgtitle">Рис. 18.3 Цветовая карта Старой Москвы с объектами шести классов размерности</span></p>

<br>

<img src="Pict_4_18/03_accounttable.png" width="40%" height="relative">
<br><span class="imgtitle">Рис. 18.4 Скриншот таблицы результатов расчета объектов ЗИ Старой Москвы по классам размерности</span></p>


<p>Что нового мы узнаем из выходной таблицы инструмента <span class="blackbold">Accounting</span>? В первом разделе показаны базовые настройки (<span class="cursive">тип связности, разрешение пикселей, коэффициенты преобразования в гектары</span>). Второй раздел подробно описывает каждый размерный класс: <span class="cursive">диапазон площадей, цвет, количество и общая площадь объектов, пропорция по отношению к общему числу объектов и к общей площади всех объектов зеленой инфраструктуры (ЗИ)</span>.</p>

<p>Например, к классу <b>3</b> относятся объекты, имеющие размер в пикселях <span class="greencursiv">1514</span> и желтую цветовую  кодировку на карте: в этом размерном классе насчитывается <span class="greencursiv">92</span> объекта общей площадью <span class="greencursiv">359543 га</span>, занимающих <span class="greencursiv">0.72%</span> всей территории и к этому классу относится <span class="greencursiv">31.6%</span> площади всей зеленой инфраструктуры.</p>

<p>Резюме внизу страницы показывает, что это изображение имеет в общей сложности <span class="greencursiv">12769</span> объекта, а общая площадь составляет <span class="greencursiv">1 135 821 га</span>. Далее приводятся сведения о среднем и медианном значениях. Средний размер патча не является надежным инструментом, так как медиана лучше подходит для асимметричных распределений. Видно, что медиана объясняет высокий вклад небольших участков и полученный размер (<span class="greencursiv">6 га</span>) является гораздо лучшим представлением о типичных размерах элементов ЗИ, чем средняя  величина участка <span class="greencursiv">88,9 га.</span> Обращает на себя внимание нулевое присутствие объектов в классе <b>5</b>. В последнем разделе приведены подробные сведения об идентификаторе и площади  трех самых больших объектов,  показанных в розовом цвете.</p>

<p>Как уже отмечалось, результат зависит от принятых пороговых значений классов. В предыдущем примере мы «согласились» со стартовым пороговым значением в <span class="greencursiv">152</span> пикселей (<span class="greencursiv">3,89 га</span>). Однако как известно из теории «островной биогеографии» для урбанизированных территорий крайне важно иметь элементы ЗИ площадью <span class="greencursiv">5 га</span> и выше, поскольку они обеспечивают выживание минимальных популяций <a href="BIBLIO.html#Бигон_1989">[Бигон, Харпер, Таунсенд, 1989]</a> (в условиях города – это орнитофауна). Следовательно, целесообразно попытаться провести расчет с данным значением  для 1-го класса размерности (тем более, что он близок к выявленному медианному значению площадей элементов ЗИ для Москвы -  <span class="greencursiv">6 га</span>). Устанавливая значения для прочих классов, используем гипотезу «фрактальности», предполагая, что несмотря на искусственность происхождения элементы ЗИ отчасти подчиняются данному распределению.</p>

<img src="Pict_4_18/02_accuonting.png" width="90%" height="relative">
<br><span class="imgtitle">Рис. 18.5 Опции ручной (экспертной) настройки инструмента Accounting: шесть размерных классов с величиной площади в пикселях, гектарах и акрах</span></p>

<p>Результаты классификации с экспертными опциями представлены в <a href="#Таблица 18.2">Таблице 18.2</a></p>

<a id="Таблица 18.2"><span class="imgtitle">Таблица 18.2 Результаты анализа размерности (по экспертно назначенным пороговым значениям) элементов ЗИ Москвы

<table id="customers">
      <table border="1">
        <tr>
            <th>Класс</th>
            <th>Диапазон<br> размерности, га</th>
				<th>Цвет</th>
				<th>Количество<br> объектов</th>
				<th>Общая площадь <br>объектов <br>
				 в классе</th>
				<th>Доля (%) общего <br>числа объектов</th>
				<th>Доля (%) от общей<br> площади всех<br> объектов</th>
         </tr>
        <tr>
        		<td>1</td>
        		<td>->5,12</td>
        		<td>черный</td>
        		<td>12259</td>
        		<td>4647</td>
        		<td>96,01</td>
        		<td>15,98</td>
         </tr>
         <tr>
        		<td>2</td>
        		<td>->16,07</td>
        		<td>красный</td>
        		<td>300</td>
        		<td>2734</td>
        		<td>2,35</td>
        		<td>9,40</td>
         </tr>
         <tr>
        		<td>3</td>
        		<td>->50,48</td>
        		<td>желтый</td>
        		<td>140</td>
        		<td>4073</td>
        		<td>1,10</td>
        		<td>1,10</td>
         </tr>
         <tr>
        		<td>4</td>
        		<td>->158,51</td>
        		<td>оранжевый</td>
        		<td>48</td>
        		<td>4115</td>
        		<td>0,38</td>
        		<td>14,15</td>
         </tr>
			<tr>
   		   <td>5</td>
        		<td>->497,76</td>
        		<td>коричневый</td>
        		<td>16</td>
        		<td>4539</td>
        		<td>0,13</td>
        		<td>15,61</td>
         </tr>
         <tr>
        		<td>6</td>
        		<td>497,766 </td>
        		<td>зеленый</td>
        		<td>6</td>
        		<td>8970</td>
        		<td>0,05</td>
        		<td>30,85</td>
         </tr>
</table><br>

<p>Выраженность старших классов (<b>4,5</b> и <b>6</b>) позволяет получить картину, более адекватную существующей действительности. Интересно, что <span class="greencursiv">140</span> объектов третьего класса размерности в совокупности имеют почти такую же площадь как <span class="greencursiv">48</span> объектов четвертого класса. Появляется ненулевой (как в предыдущей классификации) пятый размерный класс включающий 16 объектов площадью около <span class="greencursiv">500 га</span> и более.  Не меняется (естественно) значение медианы, и три крупнейших объекта по-прежнему находятся «вне» классификации.</p>

<p><span class="blackbold">Parcellation|Парцелляция</span>. Данная операция как бы наследует подход к расчету ландшафтных метрик, принятых в программном комплексе <span class="blackbold">FRAGSTAT</span>. Инструмент может использоваться для обычного бинарного растра, т.е.,  для любых двух классов (например, как в нашем случае – Зеленая Инфраструктура и Фон). Выводит файл в двух форматах (<b>txt</b>, <b>csv</b>). Позволяет рассчитывать следующие параметры:</p>

<ul>
    <li>Class: Порядковый номер отдельных классов ландшафтов или вида землепользования,</li>
	<li>Value</b>: Класс (значение) типа землепользования в конкретном растре,</li>
	<li>Count</b>: Общее число патчей данного класса,</li>
	<li>Area</b>: Общая площадь патчей данного класса (в пикселях),</li>
	<li>APS</b>: Средняя площадь патчей данного класса (в пикселях),</li>
	<li>AWAPS</b>: Взвешенная площадь патчей данного класса (в пикселях),</li>
	<li>AWAPS/data</b>: Взвешенная площадь патчей данного класса (в пикселях) с учетом площади,</li>
	<li>DIVISION</b>: Степень фрагментированности данного класса (индекс, 0,0 – 1,0),</li>
	<li>PARC</b>: Логарифмическое преобразование и нормализация фрагментированности.</li>	
</ul>

<a id="Таблица 18.3"><span class="imgtitle">Таблица 18.3. Результаты процедуры  Parcellation<br> для зеленой инфраструктуры Москвы

<table id="customers">
      <table border="1">
        	<tr>
            <td>Class</td>
            <td>Value</td>
            <td>Count</td>
            <td>Area[pixels]</td>
            <td>APS</td>
            <td>AWAPS</td>
            <td>AWAPS/data</td>
            <td>DIVISION</td>
            <td>PARC[%]</td>
          </tr>
          <tr>
            <td>Фон</td>
            <td>1</td>
            <td>2474</td>
            <td>2878007</td>
            <td>1163</td>
            <td>2644680</td>
            <td>1896300</td>
            <td>0,08</td>
            <td>0,61</td>
          </tr>
          <tr>
            <td>ЗИ</td>
            <td>2</td>
            <td>12769</td>
            <td>1135821</td>
            <td>88</td>
            <td>31340</td>
            <td>8868</td>
            <td>0,97</td>
            <td>25,99</td>
          </tr>
     </table>
</p><br>

<p><span class="blackbold">Парцелляция</span> может быть использована в качестве переменной состояния для количественной оценки степени фрагментации ЗИ, а также для непосредственного измерения изменения фрагментации по разновременным данным; в этом качестве метрика может быть полезной в вопросах ландшафтного планирования, мониторинга и исследования биоразнообразия <a href="BIBLIO.html#Forman_2016">[Forman, 2016]</a>. На данном примере можно убедиться, что ЗИ занимает приблизительно <span class="greencursiv">39%</span> (по пикселям) от основных видов землепользования Москвы, но при этом только <span class="greencursiv">28%</span> от общей площади города. Число отдельных фрагментов "фона" почти в шесть раз меньше чем число фрагментов ЗИ, просто потому, что ЗИ представлена, в основном, мелкими фрагментами, что подтверждается значением <span class="cursive"></span>APS|Средней площади патчей - <span class="greencursiv">1163</span> для "фона" и <span class="greencursiv">88</span> для ЗИ (что составляет соответственно <span class="greencursiv">1,8</span> и <span class="greencursiv">0,14</span> га). Об этом же свидетельствует и степень фрагментированности - <span class="greencursiv">0,06</span> для фона и <span class="greencursiv">0,97</span> для ЗИ.</p>

<p><span class="blackbold">Contortion|Искривление</span> или "перемена вектора" описывает степень регулярности ориентировки сторон периметра объекта «переднего плана» через число изменений направления его отрезков.</p>

<p>Важной особенностью <span class="blackbold">Contortion</span> является независимость от длины диагональных линий (в связи с общей «пиксельностью» изображения). Например, два треугольника, ориентированные в одном направлении, но разного размера, будут иметь различное количество точек пиксельных углов по периметру патча вдоль диагональных линий. Тем не менее, они оба имеют одинаковое искажение (значение - <span class="greencursiv">2</span>). То же самое верно и для окружностей разного размера. На спутниковых снимках, объекты правильной формы, такие как здания и сельскохозяйственные поля, будут иметь низкие значения искажения, в то время как природные объекты с более-менее сложной формой периметра будут иметь более высокие значения искажения.</p>

<p>Меню инструмента предполагает контроль над двумя параметрами – <span class="cursive">минимальной площадью учитываемых объектов</span> и   <span class="cursive">EdgeWidth|Шириной их краевой части</span> (периферии, "опушки"). Строка заголовка показывает долю вычисленного от общего количества переднего плана (<b>FG – foreground</b>) объектов в изображении. Панель <span class="monospace">Divide|Разделить диапазон</span> под окном карты может использоваться для группировки диапазона значений искажения по категориям <span class="cursive">small|малый</span> <span class="cursive">medium|средний</span> <span class="cursive">large|большой</span> с помощью  пользовательских значений в соответствующем раскрывающемся списке значений. Для каждого элемента ЗИ рассчитывается свой индивидуальный индекс, при этом следует иметь ввиду, что сложность («искривленность») границы не является простой функцией величины (площади) объекта.</p>

<img src="Pict_4_18/05_contortion.png" width="55%" height="relative">
<br><span class="imgtitle">Рис. 18.6 Contortion: значения сложности периметра разведены по классам цветовой шкалы: темно зеленый (индекс 940) светло-зеленый (628), желтый ((380), темно-желтый (316), оранжевый (268), светло-коричневый (172), красный (78)
</span></p>
<br>


<h3 id="h3_4">18.4. Группа Pattern - морфологический пространственный анализ</h3>

<p>Группа <span class="blackbold">Pattern|Паттерн)</span> является центральной группой всего программного комплекса <span class="blackbold">GTB</span>  и обеспечивает доступ к нескольким разновидностям морфологического пространственного анализа, различающимся сложностью:  числом и характеристиками выходных классов: <span class="blackbold">SPA3, SPA5, SPA6, MSPA</span>.</p>

<p>Расчет <span class="blackbold">SPA3</span> позволяет получить три значимых класса: два для зеленой инфраструктуры –  <span class="cursive">core (ядра)</span>, и <span class="cursive">margin (края)</span> и третий класс <span class="cursive">фон</span>. Инструмент <span class="blackbold">SPA5</span> выдает значения четырех классов, к значимым классам переднего плана добавляется параметр  <span class="cursive">core opening|разрыв в ядрах)</span>: в роли таковых могут выступать запечатанные поверхности во внутренней части зеленого массива.  Соответственно в <span class="blackbold">SPA6</span> также появляется еще один дополнительный  класс переднего плана - <span class="cursive">islet (остров)</span>, представляющие собой изолированный фрагмент переднего плана (в нашем случае - отдельный сквер или небольшой парк).</p>

<p>Однако наиболее полноценным как по числу выходных классов, так и по набору опций, подлежащих регулированию, является инструмент <span class="blackbold">MSPA</span>, использующий в качестве входного файла для анализа все тот же растр с двумя кодовыми значениями ("передний план – фон"), на выходе – типологические классы пространственной структуры, характеризующие в совокупности важнейшие свойства размерности, связности-соединенности и изолированности объектов. Результаты анализа выдаются в виде карты (формат <span class="monospace">color-map</span>) и сводной таблицы, в которой указываются значения отдельных категорий.</p>

<p>Важно отметить, что данная процедура не подлежит «бездумному» использованию: эксперт должен задавать размер «края» исходя из задач моделирования и качества используемого растра. Этот параметр заводится в разделе <span class="blackbold">MSPA</span> <span class="cursive">setting</span>, в закладке <span class="cursive">Edge Width [pixel]</span>. По умолчанию там перечислены значения от <span class="greencursiv">1</span> до <span class="greencursiv">10</span> пикселей, что может оказаться недостаточным, например, если как в нашем примере размер пикселя <span class="greencursiv">16*16 м</span>, а мы хотели бы получить размер буферной зоны более 160 (10 пикселей) метров. В этом случае в поле можно занести любое другое значение, добиваясь необходимого результата.Для вывода статистики в специальную панель необходимо поставить «галочку» в поле <span class="cursive">MSPA-statistic</span>  <a href="Pict_4_18/06_mspa_statistic.png">(Рис. 18.7.)</a> </p>

<div class="script_01">
<figure>
<img src="Pict_4_18/06_mspa_statistic.png"  width="90%" height="relative"></a>
</figure align=left>
<figure>
<img src="Pict_4_18/06_mspa_10_setting.png" width="90%" height="relative"></a>    
</figure>
</div>
<br><span class="imgtitle">Рис. 18.7 MSPA-анализ: выводная таблица структурных элементов пространственного анализа (слева) и критически важная установка "ширины края" инструмента (справа)
</span></p>
<br>

 <a id="Таблица 18.4."><span class="imgtitle">Таблица 18.4. Выходные классы – элементы структуры MSPA-анализа

<table id="customers">
      <table border="1">
        	<tr>
            <th>№</th>
            <th>Класс (англ.)</th>
            <th>Класс (русск.)</th>
            <th>Характеристика класса для зеленой инфраструктуры)</th>
          </tr>
          <tr>
            <td>1</td>
            <td>Core</td>
            <td>Ареал</td>
            <td>Внутренние части (без «краев»)  относительно крупных ареалов («ядер») ЗИ</td>
          </tr>
          <tr>
            <td>2</td>
            <td>Edge</td>
            <td>Край</td>
            <td>Периферийная полоса по периметру ядра ЗИ, ширина которой задается опцией Edge Width в пикселях</td>
          </tr>
          <tr>
            <td>3</td>
            <td>Islet</td>
            <td>Остров</td>
            <td>Изолированный  фрагмент ЗИ, окруженный со всех сторон «фоном»</td>
          </tr>
          <tr>
            <td>4</td>
            <td>Core-Opening</td>
            <td>Разрыв</td>
            <td>Небольшой по площади разрыв внутреннего ареала, раскрывающий пиксели "фона", со всех сторон окруженный ЗИ</td>
          </tr>
          <tr>
            <td>5</td>
            <td>Loop</td>
            <td>Петля</td>
            <td>Элемент, причленяющий к ядру небольшое пространство "фона"</td>
          </tr>
          <tr>
            <td>6</td>
            <td>Perforation</td>
            <td>Внутренний<br>буфер</td>
            <td>Периферийная полоса по периметру внутреннего разрыва ЗИ, ширина которой задается опцией Edge Width </td>
          </tr>
          <tr>
            <td>7</td>
            <td>Bridge</td>
            <td>Коридор</td>
            <td>Элемент ЗИ, соединяющий между собой два любых ядерных ареала</td>
          </tr>
          <tr>
            <td>8</td>
            <td>Branch</td>
            <td>Ответвление</td>
            <td>Частично изолированный фрагмент ЗИ, соединенный  с краем ядерного ареала</td>
          </tr>
          <tr>
            <td>9</td>
            <td>Background</td>
            <td>Фон</td>
            <td>Пиксели заднего плана (запечатанные поверхности), окруженные со всех сторон также пикселями заднего плана на расстоянии, превышающем указанное</td>
          </tr>
          <tr>
            <td>10</td>
            <td>Opening</td>
            <td>Площади фона</td>
            <td>Крупные ареалы запечатанных поверхностей, лишенные ЗИ</td>
          </tr>
          <tr>
            <td>11</td>
            <td>Border Opening</td>
            <td>Залив</td>
            <td>Перфорация, разрыв в краевой части ядра ЗИ, связанная с запечатанной площадью</td>
          </tr>
          <tr>
            <td>12</td>
            <td>Missing</td>
            <td>Потерянные<br>пиксели</td>
            <td>Пиксели, которые не отнесены ни к одному из классов</td>
          </tr>
     </table><br>

<p>Таким образом <span class="blackbold">MSPA</span> анализ выводит <span class="greencursiv">11</span> классов структурных элементов зеленых насаждений; при этом <span class="greencursiv">7</span> из них принадлежат собственно ЗИ - <span class="monospace">ареалы|Core</span> и <span class="monospace">острова|Isle</span>, <span class="monospace">внешние|Edge</span> и <span class="monospace">внутренние края|Perforation</span>, <span class="monospace">ответвления|Branches</span>, <span class="monospace">петли|Loop</span> и <span class="monospace">связующие коридоры|Bridge</span>. Вмещающий фон - или в данном случае запечатанное пространство города -  состоит из комплементарных элементов, т.е., собственно неограниченного фона <span class="monospace">Background</span>, крупных кварталов застройки между ареалами "зеленки" <span class="monospace">Opening</span>, разрывов ареалов "зеленки" <span class="monospace">Core-Opening</span>, и глубоко вдающихся в ареалы "заливов" <span class="monospace">Border Opening</span>. Подобная классификация в известной степени облегчает решение задачи конструирования зеленой инфраструктуры городов, предоставляя в распоряжение проектировщиков нечто вроде готовых "строительных блоков" <a href="BIBLIO.html#Климанова_2021">[Климанова, Колбовский, Илларионова, 2021]</a>.</p>

<img src="Pict_4_18/06_mspa_5_edge.png" width="55%" height="relative">
<br><span class="imgtitle">Рис. 18.8 Выходная цветовая карта color map  MSPA-анализа на основе слоя  Tree Cover для Старой Москвы</span></p> 

<p>Цветовая карта (color map)  <span class="blackbold">MSPA-анализа</span> на основе  растрового слоя  <span class="backgreen">Tree Cover</span> для Старой Москвы <a href="Pict_4_18/06_mspa_5_edge.png">(Рис. 18.7)</a>   представляет результат расчета с параметрами «края» <span class="greencursiv">80 м</span> и включенным «переходом» (<span class="cursive">Transition On</span>).</p>

<br><span class="imgtitle">Таблица 18.6. Результаты MSPA-анализа для Старой Москвы с параметрами «края» 80 м и включенным «переходом»

<table id="customers">
      <table border="1">
        	<tr>
            <th>MSPA-class</th>
            <th>color</th>
            <th>FG/data pixels [%]*</th>
            <th>#/BG area**</th>
          </tr>
          <tr>
            <td>CORE(small)</td>
            <td>green</td>
            <td>--/--</td>
            <td>0</td>
          </tr>
          <tr>
            <td>CORE(mean)</td>
            <td>green</td>
            <td>27.16/ 7.68</td>
            <td>512</td>
          </tr>
          <tr>
            <td>CORE(large)</td>
            <td>green</td>
            <td>--/--</td>
            <td>0</td>
          </tr>
          <tr>
            <td>ISLET</td>
            <td>brown</td>
            <td>29.20/ 8.26</td>
            <td>12429</td>
          </tr>
          <tr>
            <td>PERFORATION</td>
            <td>blue</td>
            <td>0.87/ 0.25</td>
            <td>35</td>
          </tr>
          <tr>
            <td>EDGE/td>
            <td>black</td>
            <td>18.96/ 5.37</td>
            <td>381</td>
          </tr>
          <tr>
            <td>LOOP</td>
            <td>yellow</td>
            <td>4.76/ 1.35</td>
            <td>404</td>
          </tr>
          <tr>
            <td>BRIDGE</td>
            <td>red</td>
            <td>12.81/ 3.63</td>
            <td>819</td>
          </tr>
          <tr>
            <td>BRANCH</td>
            <td>orange</td>
            <td>6.24/ 1.77</td>
            <td>5412</td>
          </tr>
          <tr>
            <td>Background</td>
            <td>grey</td>
            <td>-/71.70</td>
            <td>4927/287807</td>
          </tr>
          <tr>
            <td>Opening</td>
            <td>grey</td>
            <td>93.62 Integrity</td>
            <td>4829/77456</td>
          </tr>
          <tr>
            <td>Core-Opening </td>
            <td>darkgrey</td>
            <td>-/ 0.06</td>
            <td>69/2240</td>
          </tr>
          <tr>
            <td>Border-Opening</td>
            <td>grey</td>
            <td>-/ 1.87</td>
            <td>4760/75216</td>
          </tr>
</table>
<i>* в левой части – процент, занимаемый данным элементом в общей площади элементов ЗИ, в правой части – процент от общей площади территории</i><br>
<i>** в левой части общее число элементов данного класса, в правой -  площадь в пикселях</i><br>

<p>Разумеется, результаты весьма чувствительны к параметру глубины предполагаемой "опушки" - <span class="cursive">Edge Width</span>. При изменении данного параметра <a href="Pict_4_18/07_mspa_1p.png">(Рис. 18.9)</a> модель демонстрирует закономерные изменения: увеличенный край "съедает" внутренние части ядерных ареалов переводя небольшие ареалы в "острова", тем самым увеличивая общее число элементов ЗИ, но уменьшая их площадь. Часть внутренних разрывов ареалов переходит в площади основного фона - запечатанные поверхности, а сами такие ареалы трансформируются в кружево "мостов" и "ветвей". Следовательно общее число ядерных ареалов уменьшается с увеличением краевой зоны.</p>

<div class="script_01">
<picture align=left>
<img src="Pict_4_18/07_mspa_1p.png" width="110" height="110">
</picture>

<picture align=center>
<img src="Pict_4_18/07_mspa_5p.png" width="110" height="110">
</picture>

<picture align=right>
<img src="Pict_4_18/07_mspa_10p.png" width="110" height="110">
</picture>
</div>

<br><span class="imgtitle">Рис. 18.9 Результаты (фрагмент территории Старой Москвы между Сокольниками и Главным Ботаническим Садом) MSPA-анализа при различных параметрах Edge Width|Опушки: 1 пиксель – 16 м, 5 пикселей – 80 м, 10 пикселей – 160 м</span></p>

<p>Второй настраиваемой параметр программы - это учет <span class="cursive">(Transition on)</span> или неучет <span class="cursive">(Transition off)</span> потенциальных пикселей перехода. <span class="bolditalic">Пиксели перехода</span> - это те краевые  пиксели ареалов, которые непосредственно контактируют с "петлей" или "мостом". По сути, включая или выключая данный  параметр мы либо допускаем, либо отрицаем потенциальную возможность осуществления связей. В реальности это зависит от характера границ: так, если фрагмент зеленой инфраструктуры, например, парк обнесен забором, то примыкающая к нему аллея не будет иметь с ним реальной связи, и, следовательно, не будет полноценно функционировать в качестве экологического коридора или просто транзитной полосы.</p>

<div class="script_01">
<figure>
<img src="Pict_4_18/08_trans_on.png"  width="250" height="250"></a>
</figure>
<figure align=right>
<img src="Pict_4_18/08_trans_off.png" width="250" height="250"></a></figure>
</div>
<br><span class="imgtitle">Рис. 18.10 Результаты MSPA-анализа  размерностью края в 5 пикселей (80 м) и включенным (слева) и выключенным (справа) переходом</span>

<p>Соответственно если переход <span class="cursive">Transition on</span> установить на значение <span class="greencursiv">0</span>, то границы ареалов по всему периметру будут показаны как «края», а границы всех разрывов внутри как буфер (перфорация).  Следует понимать, что выключение опции перехода (т.е., по сути – опции проницаемости краев)  "съедает" большую часть мелких соединяющих элементов ЗИ - <span class="monospace">коридоров</span>, <span class="monospace">ветвей</span> и <span class="monospace">петель</span>.</p>

<p>Наконец, последнюю дополнительную настройку обеспечивает параметр <span class="cursive">Intext</span> позволяющий отделить внутренние объекты от внешних, в тех случаях когда внутренние объекты находятся внутри «разрыва» (<span class="monospace">perforation</span>). При включенном (<span class="cursive">Intext=1</span>) параметре, к семи основным классам зеленой инфраструктуры добавляется еще один класс (как бы «островок» внутри перфорации).</p>

<p>Меню  <span class="blackbold">Pattern>>Moving Window</span> предоставляет доступ к нескольким алгоритмам «перемещающегося окна», реализованным с помощью универсальной программы свертки изображений "spatcon" <a href="BIBLIO.html#Riitters_2009">[Riitters, Vogt, Estreguil, 2009]</a>. Пользователь указывает размер окна, которое затем накладывается поверх каждого пикселя входного изображения. Выбранная метрика, вычисляется для всей площади окна, и результат повторно назначается центральному пикселю в выходном изображении. Все индексы текстуры получаются из анализа таблица смежности атрибутов, где <b>Fij</b> – это частота соседних пар пикселей с типами землепользования <b>{i, j}</b>. Формируемая таблица смежности оценивается с четырех сторон, при этом если с любой из сторон отсутствуют пиксели переднего плана (в нашем случае – принадлежащие ЗИ),  то «ребро» считается несуществующим. Метрика  <span class="cursive">P22</span> расчитывает степень сцепленности для единственного класса растрового изображения, в то время как метрика <span class="cursive">Shannon/SumD</span> отражает сцепленность-связность для всех классов изображения.</p>
<br>

<img src="Pict_4_18/09_pattern_mow_window.png" width="60%" height="relative">
<br><span class="imgtitle">Рис. 18.11 Меню инструментов  "двигающегося окна" группы Pattern</p>

<p><span class="blackbold">LM – Ландшафтная мозаика</span> - так называемая "полярная" классификация местоположений, учитывающая относительные пропорции трех классов в окне, окружающем это местоположение <a href="BIBLIO.html#Riitters_2009">[Riitters, Vogt, Estreguil, 2009]</a>. В классификации используются критические значения <span class="greencursiv">10%</span>, <span class="greencursiv">60%</span> и <span class="greencursiv">100%</span> вдоль каждой оси для разделения пространства на 19 классов ландшафтной мозаики для каждого пикселя в выбранном пользователем масштабе наблюдения. Второй вывод показывает статистическую сводку в виде <span class="monospace">"тепловой" карты</span>, демонстрирующей относительные частоты пикселей в каждой из <span class="greencursiv">103</span> категорий и <span class="monospace">CSV-файл</span>, содержащий числовые значения тепловой карты.</p>

<div class="script_01">
<figure>
<img src="Pict_4_18/10_lm_map.png" width="250" height="300px"></a>
</figure>
<figure align=right>
<img src="Pict_4_18/10_lm_map_fragm.png" width="250" height="300px"></a> 
</figure>
</div>
<br><span class="imgtitle">Рис. 18.12 Выходная карта LM-анализа для территории Старой Москвы: общий вид (слева) и фрагмент (справа)</p>

<p>Содержательная интерпретация результата <span class="blackbold">LM-анализа</span> требует обращения к "треугольнику" значений или так называемой <span class="monospace">тепловой диаграмме</span>. В этой диаграмме каждый мини-треугольник отображает соотношение синего, зеленого и красного цвета. В цветовых углах треугольника находятся значения полной единицы <span class="greencursiv">(1)</span>. При смещении по ребру треугольника к следующему углу значение уменьшается до нуля (с шагом <span class="greencursiv">0,1</span>). Присутствующие пиксели (в % к общему числу пикселей сцены) обозначены цифрами в белых кружках в центре мини-треугольника, отсутствие цифр означает, что элементы с такими свойствами не наблюдаются.</p>

<img src="Pict_4_18/10_lm_headmap.png" width="65%" height="relative">
<br><span class="imgtitle">Рис. 18.13 Тепловая диаграмма (треугольник) LM-анализа 
<br>


<h3 id="h3_5">18.5. Группа Fragmentation - фрагментация</h3>

<p><span class="blackbold">Fragmentation|Фрагментацию</span>  можно рассматривать как дополнительный аспект представлений о пространственной композиции, обращенный одновременно к характеристикам переднего плана (ЗИ)  и фона (запечатанные поверхности). Параметр учитывает количество объектов и расстояние между ними. В ландшафтной экологии понятие фрагментации заимствовано из биогеографии, где оно определяется для конкретного вида флоры или фауны, поэтому результаты "фрагментации вообще" не всегда поддаются простой интерпретации. Вдобавок значение метрик и их объяснение усложняются с возрастанием числа классов в структуре ландшафта и спектре землепользования <a href="BIBLIO.html#Velázquez_et_al_2017">[Velázquez et al., 2017]</a>.</p>

<p>Подменю <span class="blackbold">Index|Индекс</span> обеспечивает способ определения нормализованной фрагментации для всего изображения в целом, а <span class="blackbold">Entropy|Энтропия</span> рассчитывает показатель энтропии. Так называемая <span class="blackbold">Hypsometry</span>, рассчитывает нормализованную гипсометрическую кривую, отображающую максимальную дистанцию между передним планом и фоном.</p>

<p><span class="blackbold">Фрагментации</span> присущ сложный двойственный характер (передний план фрагментируется фоном и наоборот), степень фрагментации для любой территории определяется взвешенной суммой фрагментации на переднем плане и фоне. Значения  фрагментации изменяется в диапазоне <span class="greencursiv">0, 100 %</span>, кроме отмеченной уже «двойственности» свой вклад в величину вносят, перфорация, общее количество, разделение и рассеивание объектов переднего плана и фона. Нормализованная гипсометрическая кривая демонстрирует высокую степень фрагментации в Москве как для зеленой инфраструктуры (<span class="greencursiv">80,4%</span>), так и для фона запечатанных и застроенных поверхностей (<span class="greencursiv">84,7%</span>).</p>

<img src="Pict_4_18/11_fragment_curva.png" width="65%" height="relative">
<br><span class="imgtitle">Рис. 18.14 Нормализованная гипсометрическая кривая для минимума (черный), максимума (красный) а также фактическое состояние фрагментации ЗИ (зеленый цвет) и фона (синий) </p>

<P>Подменю фрагментации <span class="blackbold">Map</span> представляет индексы, отображающие пространственное распределение нормализованных значений фрагментации. Две метрики – <span class="monospace">Entropy</span> и <span class="monospace">Contagion</span> по признанию авторов <a href="BIBLIO.html#Vogt_Riitters_2017">[Vogt, Riitters, 2017]</a> позволяют <i>«прочувствовать физический смысл понятий, поскольку разработаны уже более совершенные инструменты»</i>.</p>

<p>Первая операция здесь - <span class="blackbold">Entropy|Энтропия</span>. В термодинамике энтропия описывает степень хаотичности системы. Перенося это понятие в пространственную геометрию (растровые изображения), мы можем использовать энтропию в качестве дескриптора пространственной фрагментации, вычисляя ее на основе представления о связанности по 8 румбам  для пикселей зеленой инфраструктуры. Цветовая карта <span class="monospace">Энтропии</span> <a href="Pict_4_18">(Рис. 18.14)</a> показывает, что наименьшая энтропия свойственна большим нерасчлененным резерватам ЗИ а также мелким объектам в окружении фона (в центральной части); наибольшая энтропия свойственна средним по площади элементами с высокой степенью расчлененности.</p>

<div class="script_01">
<figure>
<img src="Pict_4_18/12_entropy_map.png" width="250" height="300"></a>
</figure>
<figure align=right>
<img src="Pict_4_18/12_entropy_frag.png" width="150" height="150"></a> 
</figure>
</div>
<br>
<span class="imgtitle">Рис. 18.15 Энтропия (слева – общая схема, справа – фрагмент) для Москвы: общая - 19.2, зеленой инфраструктуры - 35.0

 
<p>В пределах заданной области изображение с одним компактным объектом ЗИ имеет минимальную энтропию; максимального значения энтропия достигает, когда зеленая инфраструктура представлена множеством объектов, равномерно распределенных по всему изображению. Таким образом, «шахматное распределение» элементов переднего плана и фона обеспечивает  максимальное значение энтропии. Эти два граничных условия определяют возможный диапазон фрагментации изображения.</p>

<p>Следующий способ характеристики фрагментированности – <span class="blackbold">Contagion</span> (сцепленность-связанность) объектов изображения. С помощью этой метрики определения <span class="monospace">Фрагментация</span> может быть определена как противоположность связанности (1 – <span class="monospace">Contagion</span>). Следовательно область изображения с высокой сцепленностью эквивалентна низкой фрагментации. Сцепленность объектов переднего плана вычисляется с помощью Метрики <span class="blackbold">P22</span> движущегося окна  размером 49, что обеспечивает статистически значимую выборку данных. Результат показывает нормализованную фрагментацию как функцию пространственной сцепленности.</p>

<div class="script_01">
<figure>
<img src="Pict_4_18/13_contagion_map.png" width="125%" height="relative"></a>
</figure>
<figure align=right>
<img src="Pict_4_18/13_contagion_fragm.png" width="70%" height="relative"></a> 
</figure>
</div>
<br><span class="imgtitle">Рис. 18.16 Contagion (слева – общая схема, справа – фрагмент) для Москвы</p>

<p>Как <span class="blackbold">Entropy|Энтропия</span>, так и  <span class="blackbold">Contagion|Сцепленность</span>, могут рассматриваться в качестве локальных параметров агрегации, но с важным отличием: в то время как <span class="blackbold">Contagion</span> учитывает только объекты переднего плана, оценка фрагментации на основе энтропии основана на одновременной оценке переднего плана и фона. Например, изображение с преобладающим фоновым покрытием (т.е., <span class="greencursiv">95%</span>) и несколькими изолированными объектами переднего плана (<span class="greencursiv">5%</span>) приведет к высоким значениям "фрагментации как сцепления". Для "фрагментации как энтропии" это изображение будет иметь низкие значения, потому что доминирующее покрытие области (фон) только слегка фрагментировано передним планом (например «островами» парков на фоне застройки).</p>

<p>Более сложный инструмент оценки фрагментации из группы <span class="monospace">MAP</span> - <span class="blackbold">The Fixed Observation Scale (FOS)</span> вычисляет фрагментацию как функцию плотности области переднего плана (ЗИ) в выбранном пользователем масштабе наблюдения, и указанной длине края квадратного движущегося окна в графическом интерфейсе.</p>

<img src="Pict_4_18/14_fos_выбор.png" width="80%" height="relative">
<br><span class="imgtitle">Рис. 18.17 Окно установки параметров инструмента FOS</span>

<p>Выбранные настройки затем используются для расчета площади движущегося окна, которая отображается в гектарах и акрах. Нижняя панель графического интерфейса предоставляет информацию о размере пикселя, полученную с помощью команды <span class="cursive">gdalinfo</span>. Пользователь может выбрать настройки из выпадающего меню или вставить пользовательские значения, а затем нажать клавишу <span class="monospace">Enter</span>. После определения типа анализа и выбранной пользователем шкалы наблюдения нажимается кнопка <span class="monospace">Accept|Принять</span>, чтобы применить эту шкалу для анализа фрагментации. Результат операции выводится в виде карты и данных в форматах <span class="monospace">TXT</span> и <span class="monospace">CSV</span>.</p>

<div class="script_01">
<figure>
<img src="Pict_4_18/14_fos_2class.png" width="100%" height="relative"></a>
</figure>
<figure>
<img src="Pict_4_18/14_fos_5class.png" width="100%" height="relative"></a>
</figure>
</div>
<br><span class="imgtitle">Рис. 18.18 Показатели фрагментации FOS для двух и пяти классов зеленой инфраструктуры
<br>

<br><span class="imgtitle">Таблица 18.7 FOS: FragmClass\ObsScale: 1.25 ha (Pixel resolution: 16.00 - Window size: 7x7<
      <table border="1">
        	<tr>
            <td>Class</td>
            <td>Содержание</td>
            <td>Значение</td>
          </tr>
          <tr>
            <td>Rare</td>
            <td>Изолированные</td>
            <td>0,83</td>
          </tr>
          <tr>
            <td>Patchy</td>
            <td>Фрагменты</td>
            <td>11,06</td>
          </tr>
          <tr>
            <td>Transitional</td>
            <td>Переходные</td>
            <td>15,28</td>
          </tr>
          <tr>
            <td>Dominan</td>
            <td>Доминирующие</td>
            <td>27,13</td>
          </tr>
          <tr>
            <td>Interior</td>
            <td>Внутренние</td>
            <td>9,86</td>
          </tr>
          <tr>
            <td>Intact</td>
            <td>Сцепленные</td>
            <td>35,84</td>
          </tr>
          <tr>
            <td>FAD_av</td>
            <td>FAD_av</td>
            <td>76,25</td>
          </tr>
</table>

<p>Диалоговое окно  <span class="blackbold">MultiScale</span> предоставляет инструменты проведения анализа фрагментации на различных масштабах наблюдений.
<span class="blackbold">FAD - The Foreground Area Density|Анализ плотности площади переднего плана</span>  выполняется путем измерения <span class="monospace">P2</span> по пяти шкалам наблюдения с использованием анализа движущегося окна с квадратными соседними областями длиной <span class="greencursiv">7, 13, 27, 81, 243</span> пикселя и применения маскировки переднего плана <a href="BIBLIO.html#Riitters_2009">[Riitters, Vogt, Estreguil, 2009]</a>. Результатом является набор из пяти карт (по одной для каждого масштаба наблюдения), показывающих значения <span class="monospace">P2/FAD</span> для каждого пикселя ЗИ. В результате получены карты, список FAD (плотность) значения каждого пикселя (<span class="monospace">FAD 6-class</span>) или <span class="monospace">Average-Per-Patch (FAD-APP)</span> на патч в цветовой кодировке в  классах фрагментации от 1 до 6 <a href="Pict_4_18/15_fad_optii.png">(Рис. 18.19)</a><span class=""></span></p>

<img src="Pict_4_18/15_fad_optii.png" width="80%" height="relative">
<br><span class="imgtitle">Рис. 18.19 Резюме FAD /APP - фрагментация, пороговые значения, названия и цветовая кодировка классов

<p>В статистическом резюме приводится доля каждого класса фрагментации и шкалы. Легенда карты и агрегированные результаты для всего изображения отображаются в виде совокупной гистограммы. Шкалы классов <span class="greencursiv">1, 2, 3, 4, 5</span> соответствуют длинам окон <span class="greencursiv">7, 13, 27, 81, 243</span> пикселей.</p>

<img src="Pict_4_18/15_result_fad_barplot.png" width="70%" height="relative">
<br><span class="imgtitle">Рис. 18.20 Соотношение шести классов (rare - редкие одиночные фрагменты, patchy - патчи, transitional - переходные, dominant - доминирующие, interior - внутренние, intact - изолированные)  в пяти различающихся масштабах анализа и результирующем масштабе
<br>

<br><span class="imgtitle">Таблица 18.9. Результаты FAD-анализа для территории Москвы</strong>

<table id="customers">
      <table border="1" width=100%>
        	<tr>
            <th>FAD: Fragment Class</th>
            <th>Классы фрагментации</th>
            <th>1</th>
            <th>2</th>
            <th>3</th>
            <th>4</th>
            <th>5</th>
            <th>Summary</th>
          </tr>
          <tr>
            <td>Rare</td>
            <td>Одиночные</td>
            <td>0,83</td>
            <td>1,98</td>
            <td>2,62</td>
            <td>2,84</td>
            <td>1,89</td>
            <td>0,62</td>
          </tr>
          <tr>
            <td>Patchy</td>
            <td>Патчи</td>
            <td>11,06</td>
            <td>16,43</td>
            <td>24,54</td>
            <td>39,19</td>
            <td>53,99</td>
            <td>21,84/td>
          </tr>
          <tr>
            <td>Transitional:</td>
            <td>Переходные</td>
            <td>15,28</td>
            <td>19,04</td>
            <td>22,97</td>
            <td>23,42</td>
            <td>29,37/td>
            <td>28,70</td>
          </tr>
          <tr>
            <td>Dominant</td>
            <td>Доминирующие</td>
            <td>0,83</td>
            <td>1,98</td>
            <td>2,62</td>
            <td>2,84</td>
            <td>1,89</td>
            <td>0,62</td>
          </tr>
            <td>Interior</td>
            <td>Внутренние</td>
            <td>9,86</td>
            <td>10,95</td>
            <td>11,39</td>
            <td>9,30</td>
            <td>2,99</td>
            <td>9,99</td>
          </tr>
            <td>Intact</td>
            <td>Ядерные</td>
            <td>35,84</td>
            <td>22,88</td>
            <td>12,13</td>
            <td>1,51</td>
            <td>0,00</td>
            <td>0,00</td>
          </tr>
</table><br>

<div class="script_01">
<picture>
<img src="Pict_4_18/16_fad_7.png" width="30%">
</picture>
<picture align=center>
<img src="Pict_4_18/16_fad_13.png" width="30.5%">
</picture>
<picture>
<img src="Pict_4_18/16_fad__27.png" width="32%">
</picture>
</div>
<br>
<div class="script_01">
<picture>
<img src="Pict_4_18/16_fad_81.png" width="31%">
</picture>
<picture align=center>
<img src="Pict_4_18/16_fad_243.png" width="30%">    
</picture>
<picture>
<img src="Pict_4_18/16_fad_multi.png" width="32%">
</picture>
</div>
<br><span class="imgtitle">Рис. 18.21 Результаты FAD-анализ соответствуют длинам подвижного окна  соответствуют длинам окон 7, 13, 27, 81, 243 пикселей. Последний фрагмент - мультимасштаб

<p><span class="blackbold">Фрагментация</span> как <span class="blackbold">Dominance|Доминирование</span>  строится путем измерения ландшафтной мозаики (<span class="blackbold">LM</span>) по пяти шкалам наблюдения с использованием анализа движущегося окна с квадратными соседними областями длины <span class="cursive">ks = 7, 13, 27, 81, 243</span> пикселя и применение маскировки переднего плана. Результатом (отчасти схожим с предыдущей операцией) является набор из пяти карт (по одной для каждого масштаба наблюдения), показывающих значения <span class="monospace">LM</span> для каждого пикселя переднего плана. Значения <span class="monospace">LM</span> на карте сгруппированы в сводный отчет, который показывает те же самые 19 классов мозаики. Итоговое значение для данного пикселя является результатом применения классификации <span class="cursive">tripolar LM</span> к средним значениям каждой из трех переменных в триполярной модели.</p>
<br>


<h3 id="h3_6">18.6. Группа Distance - определение расстояний, доступности и зон влияния</h3>

<p>Следующая группа инструментов набора <span class="monospace">Image Analysis</span>  -  <span class="blackbold">Distance|Дистанция</span>  включает несколько операций. <span class="blackbold">Euclidian Distance|Евклидово расстояние</span>   вычисляет карту евклидовых расстояний как для объектов переднего плана, так и для объектов фона. </p>

<div class="script_01">
<figure>
<img src="Pict_4_18/17_euclid_disnance_map.png" width="125%" height="relative"></a>
</figure>
<figure align=right>
<img src="Pict_4_18/17_euclid_disnance_frag.png" width="70%" height="relative"></a> 
</figure>
</div>
<br><span class="imgtitle">Рис. 18.22 Основные результаты процедуры Distance: слева - карта расстояний, справа - фрагмент карты.</p>

<p>Если кнопка <span class="monospace">Divide</span> (разделить) окно с картой не активна (т.е., «галочка» не поставлена), то щелчок по кнопке <span class="monospace">Intext</span> панели <span class="monospace">MSPA settings</span> вызовет отображение двух сводных графиков:</p>
<p>A) <span class="monospace">Гистограмма расстояния</span>: включая информацию о среднем расстоянии между объектами ЗИ и фона (<span class="monospace">adf/adb</span>), общем количестве объектов (<span class="monospace">fgo/bgo</span>) и максимальном расстоянии, найденном на изображении. Здесь фоновые данные имеют отрицательный знак, чтобы отличить их от данных переднего плана.</li>
<p>Б) <span class="monospace">Гипсометрическая кривая</span>: нормализованная кумулятивная частота гистограммы евклидова расстояния.</p>

<p>При просмотре распределения расстояний на изображении в виде псевдо-рельефной карты гипсометрическая кривая суммирует рельеф или контурные линии и показывает  нормализованные кумулятивные частоты евклидовых расстояний, а также связанные статистические данные для фона и переднего плана.</p>

<div class="script_01">
<figure>
<img src="Pict_4_18/17_disnance_hstoframm.png" width="100%" height="relative"></a>
</figure>
<figure>
<img src="Pict_4_18/17_hipsometrr_curv.png" width="100%" height="relative"></a>    
</figure>
</div>
<br><span class="imgtitle">Рис. 18.23 Гистограмма частот расстояний (слева) и гипсометрическая кривая (справа) 

<p><span class="monospace">Гистограмма</span> позволяет судить о среднем расстоянии между объектами переднего плана - в нашем случае объектами зеленой инфраструктуры adf=6,39 пикселей (<span class="greencursiv">102 м</span>), при этом максимальное расстояние d_max=82,12 или <span class="greencursiv">524 м</span>. <span class="monospace">Гипсометрическая кривая</span> обеспечивает дополнительные параметры, площадь фрагментов ЗИ - <span class="greencursiv">28,3%</span>,</p>

<br><span class="imgtitle">Таблица 18.10 Значения расчетных параметров Distance</strong>
<table id="customers">
      <table border="1" width=100%>
        	<tr>
            <th>Индекс</th>
            <th>Значение для Москвы</th>
            <th>Содержание</th>
            <th>Физический смысл</th>
          </tr>
        	<tr>
            <td>adb/bg_max <br>or adf/fg_max Hypsometric Index Гипсометрический Индекс</td>
            <td>0,1 для фона <br>0,08 для ЗИ</td>
            <td>Отношение средней дистанции «фона» к максимальной дистанции фона или отношение средней дистанции «переднего плана» к максимальной дистанции «переднего плана»</td>
            <td>Показывает насколько распределение смещено от "нормального", когда "среднее" близко к "медиане", а отношение средней дистанции к максимально близко к 50%</td>
          </tr>          
        	<tr>
            <td>Integral area <br>under the curve Hypsometric Area Гипсометрическая Площадь</td>
            <td>63,2 для фона <br>76,7 для ЗИ</td>
            <td>Общая площадь области под кривой</td>
            <td>Показывает величину дисперсии признака</td>
          </tr>
        	<tr>
            <td>adb/adf Average distance Усредненная дистанция</td>
            <td>6,9p (110 м) для фона <br>6,4p (102 м)для ЗИ<br>adb/adf=1,07</td>
            <td>Отношение средней дистанции фона к средней дистанции переднего плана</td>
            <td>При adb/adf~1 фрагментированность ЗИ и фона можно считать одинаковой; при adb/adf~ 0 элементы ЗИ единичны и разбросаны друг от друга на значительные расстояния, и наоборот при adb/adf значительно больших чем 0 элементы зеленой инфраструктуры доминируют над фоном а дистанция между ними минимальна </td>
          </tr>
        	<tr>
            <td>bg_max/fg_max Maximum distance Максимальная дистанция</td>
            <td>69,0p (1104 м) для фона <br>82,2p (1315 м)для ЗИ<br>bg_max/fg_max=0,84</td>
            <td>Отношение максимальной дистанции фона к максимальной дистанции переднего плана</td>
            <td>Отражает (вместе с предыдущим индексом) распределение элементов переднего плана (ЗИ) в пространстве; значения близкие к 1 демонстрируют схожее распределение, стремящиеся к 0  - преобладание фона, и наоборот значения превышающие 1 обнаруживают преобладание ЗИ</td>
          </tr>
        	<tr>
            <td>bg_obj/brfg_obj Number of objects Число объектов</td>
            <td>4927 для фона <br> 12769 для ЗИ<br>bg_max/fg_max=0,34</td>
            <td>Отношение числа объектов фона к числу объектов переднего плана</td>
            <td>Значение близкое к 1 означает равную фрагментированность ЗИ и фона, отношение значительно большее 1 показывает высокую фрагментированность фона и наоборот - стремящееся к 0  - фрагментированность ЗИ; при отсутствии данных о площадях почти ничего не говорит о размерах ЗИ и фона</td>
          </tr>
        	<tr>
            <td>bg_area/fg_area Total area of objects <br>Общая площадь объектов</td>
            <td>Отношение площади  фона к площади переднего плана</td>
            <td>71,7% для фона <br> 28,3% для ЗИ<br>bg_max/fg_max=2,53</td>
            <td>Значение близкое к 1 означает равную долю площади ЗИ и фона, при значениях больших 1 преобладает фон, и наоборот, при значениях меньше 1 - преобладает ЗИ </td>
          </tr>
        	<tr>
            <td>bg_Arep/fg_Arep Representative area Репрезентативная площадь</td>
            <td>147,9 для фона <br> 128,4 для ЗИ<br>>bg_Arep/fg_Arep=1,15</td>
            <td>Рассчитывается для опосредованного объекта круглой формы с радиусом равным средней дистанции переднего плана или фона</td>
            <td>Как и в случае со средним расстоянием (adf/adb), изменения в репрезентативной области являются индикаторными для процессов фрагментации, показывая насколько реальная форма объектов, отличается от идеальной и позволяя сравнить сложность конфигурации фона и переднего плана</td>
          </tr>                                        
</table>

<p>Строка заголовка <span class="blackbold">GTB</span> показывает дистанции переднего и заднего плана <span class="monospace">adf/adb</span>, а пространственное распределение расстояний отображается в окне карты. Для каждого пикселя карта показывает кратчайшее расстояние до ближайшего объекта переднего плана и/или фона. Расстояние задается в пиксельных единицах, (при известном значении размера пикселя могут быть переведены в метрические). Цветовой код предназначен для имитации псевдо-карты высот: синие цвета представляют «океан» (фон), желтые/красные/зеленые цвета представляют «землю» или «горы» (передний план), а значение нуля присваивается береговой линии (пересечение переднего плана/фона).</p>

<p>Инструмент <span class="blackbold">Influence Zones</span>. Зоны влияния определяются как внешняя граница равных расстояний <span class="monospace">iso-distances</span>, разделяющая выбранные объекты переднего фона (в данном случае - ЗИ). Граница зоны влияния определяется путем применения концепции «водораздела» к карте евклидовых расстояний фоновой области. Если рассматривать 8-связное евклидово расстояние как поверхность «рельефа», каждый локальный минимум можно рассматривать как точку, аккумулирующую сток из окружающей области, а линии объединяющие вершины хребтов - как водоразделы. Чтоб не допустить чрезмерной сегментации, которая может создаваться  локальными небольшими объектами, минимальный размер для учитываемых фрагментов ЗИ по умолчанию равен <span class="greencursiv">5000</span> пикселям. Пропущенные объекты меньшего минимального размера отображаются бледно-голубым цветом. Объекты, для которых рассчитываются зоны влияния, отображаются чередующимися цветами, а границы зоны влияния (линии водораздела) - черным. Информационная панель под окном карты позволяет устанавливать буферные зоны как для переднего плана, так и для фона.</p>

<p><span class="monospace">Зоны влияния</span> – весьма «говорящая» характеристика, которая может быть использована для определения ареалов распространения действия самых разных свойств ЗИ, в том числе, относящихся к экологическим сервисами, и прежде всего, разумеется – рекреационной функции. </p>


<div class="script_01">
<picture>
<img src="Pict_4_18/18_zone_influence_5000.png" width="31%">
</picture>
<picture>
<img src="Pict_4_18/18_zone_influence_300.png" width="31%">
</picture>
<picture>
<img src="Pict_4_18/18_zone_influence_100.png" width="31%">
</picture>
</div>
<br><span class="imgtitle">Рис. 18.24 Зоны влияния элементов ЗИ Москвы: слева – минимальные учитываемые объекты 5000 пикс. (8 га) слева, в центре –300 пикс (5 га), справа  - 100 пикселей (1,6 га) </p>

<p>Минимальная площадь: зоны влияния рассчитываются для объектов переднего плана, размер которых больше или равен заданной минимальной площади в пикселях. Порог малых объектов, исключаемых из расчета, может быть установлен  с помощью раскрывающегося меню <span class="monospace">MSPA SETTINGS</span>  - <span class="monospace">EdgeWidth</span>. Можно либо выбрать заранее определенное значение (<span class="greencursiv">5000</span>), либо указать пользовательское значение в строке раскрывающегося меню. Новое пользовательское значение будет присвоено только после нажатия клавиши <span class="monospace">Enter</span>.</p>

<p><span class="blackbold">Proximity|Близость</span> - последний инструмент группы <span class="monospace">Distance</span>:эта опция позволяет измерять близость между соседними объектами. Как и в случае с зонами влияния, объекты интереса определяются с 8-связностью и минимальной площадью, которую можно задать с помощью параметра <span class="blackbold"MSPA 2></span> <span class="monospace">EdgeWidth</span>. Объекты меньшего минимального размера отображаются светло-синим цветом, а линия водораздела-черным. При просмотре изображения с помощью указателя мыши информационная панель под окном карты будет отображать идентификатор компонента и связанную с ним область в пикселях, если мы находимся в фоновом режиме или над пропущенным объектом переднего плана.</p>

<div class="script_01">
<figure>
<img src="Pict_4_18/19_proximity_5000_map.png" width="125%" height="relative"></a>
</figure>
<figure align=right>
<img src="Pict_4_18/19_proximity_5000_fragm.png" width="70%" height="relative"></a> 
</figure>
</div>
<br><span class="imgtitle">Рис. 18.25 Основные результаты процедуры Proximity: слева - карта близости, справа - фрагмент карты</p>
<br>


<h3 id="h3_7">18.7. Реализация темы MSPA анализа в ArcMAP10.x</h3>

<p>Популярность <span class="blackbold">MSPA анализа</span> привела к разработке специального модуля для наиболее популярных ГИС - как проприетарных, так и условно бесплатных. Существует такой модуль и для <span class="red">ArcMAP10.x</span> он доступен по адресу <a href="https://www.arcgis.com/home/item.html?id=f2e45827e3e7467dae39e9abeff26410">GuidosToolbox</a>. После установки модуль встраивается и становится доступным в каталоге <span class="red">ArcMAP10.x</span>.</p>
<p>Для корректной работы модуля необходима подготовка исходного файла, который должен быть трансформирован в 8-битный файл с тремя значениями 0 - окружающий фон, <span class="greencursiv">1</span>- задний план сцены, <span class="greencursiv">2</span> - передний план.</p>

<img src="Pict_4_18/20_mspa_arcgis_file.png" width="55%" height="relative"></a>
<br><span class="imgtitle">Рис. 18.26 Базовый 8-битный атрибутированный растровый слой с тремя значениями:серый - окружающий фон, фиолетовый- задний план сцены, зеленый - передний план.</p>

<p>Плагин <span class="blackbold">MSPA</span> позволяет получить только собственно файл структурного анализа, т.е., то, что соответствует  - морфологическому пространственному анализу Группы Pattern "материнской" программы. Настройке подлежат все опции: 

    <div class="script">
Foreground connectivity: учет связи между 8 или 4 пикселями <br>
Effective edge width: ширина "опушки" или эффективного края  -1,2,3,4,5 <br>
Transition: возможность перехода или внешней связи - 1,0 <br>
Intext: возможность внутренней связи с элементом переднего плана в пределах разрыва
</div>

<p>Таким образом плагин обеспечивает "перебор" 40 вариантов расчета с разным опциями. Результат расчета - цветовые карты color map с таблицей значений.</p>


<img src="Pict_4_18/20_mspa_result.png" width="100%" height="relative">
<br><span class="imgtitle">Рис. 18.27 Результат работы MSPA плагина в ArcMAP10.x - цветовая карта и таблица файла.</p>

<p>Программа <span class="blackbold">GTB</span> предоставляет множество разных инструментов в распоряжение пользователя. Естественно, что они используются последовательно  в соответствии с разными задачами. Одно из самых востребованных направлений исследования - диагностика зеленой инфраструктуры мегаполисов и обоснование планировочных решений по ее  оптимизации, (см., например, работу китайских специалистов <a href="BIBLIO.html#Wei_et_al_2018">[Wei et al., 2018]</a>. Однако <span class="blackbold">MSPA-анализ</span> можно использовать и для задач типологии рисунка освоения территорий (оценивая соотношение распаханных и нераспаханных пространств, или залесенных и безлесных территорий и т.д.). Несмотря на кажущуюся сложность набор инструментов <span class="blackbold">GTB</span> позволяет специалистам извлечь из сравнительно доступных данных целый ряд весьма полезных метрик и индикаторов.</p>
<br>


<h3 id="h3_8">18.8. Реализация темы MSPA анализа в SAGA GIS</h3>

<p>Инструменты для проведения структурного анализа "встроены" сегодня практически во все популярные геоинформационные системы. Другое дело, что они могут быть рассредоточены по разным группам (наборам) операций и, возможно, не предоставляют такого широкого выбора как <span class="blackbold">Guidos Tool Box</span>. Тем не менее, основные действия, прежде всего определение численности и статистик для "патчей" разных классов, а также расчет их размерности и дифференциация на структурно-функциональные типы, могут быть осуществлены в самых разных ГИС. Рассмотрим эти возможности на примере <span class="blue">SAGA GIS</span>.</p>

<p>В качестве исходного слоя для анализа используем все тот же бинарный растр. полученный из <span class="backgreen">Tree Cover</span> в границах "Старой Москвы". Первое действие, которое позволяет оценить площади, занимаемые пикселями разных классов (фона и ЗИ) может быть осуществлено с помощью инструмента <span class="blackbold">Aggregation Index</span> группы <span class="monospace">Analysis</span> набора <span class="monospace">Grid</span>.</p>

<img src="Pict_4_18/21_s_agregation_index.png" width="55%" height="relative">
<br><span class="imgtitle">Рис. 18.28 Диалоговое окно инструмента  SAGA GIS

<p>Единственная опция, подлежащая контролю - <span class="cursive">Max.Number of Classes|Максимальное число классов</span> для бинарного растра выставляется "2". На выходе - простая таблица, содержащая четыре поля значений <span class="cursive"></span>Class</span> - номера классов,  <span class="cursive">Area</span> - общее число пикселей класса, <span class="cursive">Area%</span> (проценты пикселей классов от общей площади) и <span class="cursive">Aggregation Index</span> - собственно <span class="monospace">Индекс Агрегирования</span></p>
	
<img src="Pict_4_18/21_s_agregation_index_table.png" width="35%" height="relative">
<br><span class="imgtitle">Рис. 18.29 Выходная таблица Aggregation Index

<p><span class="monospace">Индекс Агрегирования</span> считается независимым от общего числа фрагментов класса, и масштаба. Предполагается, что класс с самым высоким уровнем агрегации (AI =1) состоит из пикселей, разделяющих все возможные ребра при прямоугольной форме пикселя - со всех четырех сторон находятся пиксели того же класса. Наоборот, полностью дезагрегированные пиксели (т.е., когда пиксель не граничит ни с одним пикселей своего класса) формируют класс с AI=0. В представленном случае "фон" выглядит практически полностью агрегированным, а зеленая инфраструктура - несколько менее агрегированной, и это связано с тем, что пиксели "зеленки" могут действительно существовать отдельно (представим маленький скверик) в городской среде.</p>

<p>Другой полезный инструмент структурного анализа в <span class="blue">SAGA GIS</span> - связан с моделированием фрагментированности. В <span class="blue">SAGA GIS</span> пользователю предлагается три варианта исследования данного свойства - <span class="blackbold">Fragmentation|Alternative</span>, <span class="blackbold">Fragmentation|Standard</span> <span class="blackbold">Fragmentation Classes from Density and Connectivity</span> авторства <b>О. Конрада</b> <span class="ref">[O.Conrad, 2008]</span>. Последний (как следует из названия) предполагает предварительное определения <span class="monospace">Плотности</span> и <span class="monospace">Связанности</span>. Два первых дают приблизительно аналогичные результаты.</p>

<p>Инструмент <span class="blackbold">Fragmentation|Alternative</span> "работает" с классифицированным растром и имеет набор опций, которые должны настраиваться пользователем в зависимости от задач и характера исходных данных.</p>

<img src="Pict_4_18/22_s__fragmentation_alternative.png" width="55%" height="relative">
<br><span class="imgtitle">Рис. 18.30 Диалоговое окно инструмента Fragmentation (Alternative) SAGA GIS</p>

<p>Важной является опция <span class="backcurs">Class identifier</span>, поскольку <span class="blue">SAGA GIS</span> "видит" класс переднего плана (т.е., ЗИ) как <span class="cursive">Z2</span>, а фон как <span class="cursive">Z1</span>, поэтому если исследуются структура ЗИ, то в следует выставить <span class="greencursiv">"2"</span>.  На выходе - цветовая карта структуры с шестью значимыми классами. которые описываются на основе параметров <span class="monospace">Density|Плотность</span>, <span class="monospace">Connectivity|Связанность</span> следующим образом:
<ol>
<li>core (ареал. "ядро"),</li>
<li>interior (внешняя "каемка" ареала) Density = 1.0,</li>
<li>edge (периферия, окружающая ареал) Density > 0.6 and Density - Connectivity,</li>
<li>perforated, ("окно"") Density > 0.6 and Density - Connectivity > 0,/li>
<li>transitional (переходная зона), </li>
<li>patch (пограничная с фоном зона). </li></ol>
</p>

<div class="script_01">
<figure>
<img src="Pict_4_18/22_s__fragmentation_alter_map_fragm.png" width="125%" height="relative"></a>
</figure>
<figure align=right>
<img src="Pict_4_18/22_s__fragmentation_altern_table.png" width="70%" height="relative"></a> 
</figure>
</div>
<br><span class="imgtitle">Рис. 18.31 Фрагмент цветовой карты фрагментации и легенда</p>

<p>Таким образом инструмент позволяет решить основную задачу - выделить из элементов ЗИ те, которые имеют обширные внутреннюю зону и защищены достаточным внешним буфером, и те, которые находятся в окружении фона и подвержены различным видам внешнего воздействия. Поскольку дифференциация типов осуществляется на основе параметров плотности и связанности, то их изменение (в соответствующих позициях диалогового окна <span class="cursive">Mininmum Density</span> <span class="cursive">Maximum Density</span>, а также <span class="cursive">Neihborhood</span>) позволяют получать диверсифицировать результат (например, в зависимости от представлений о ширине экранирующего буфера или минимального размера базовых резерватов).</p>

<p>Дополнительными результатами работы инструмента являются таблица данных классов, содержащая параметры общего числа пикселей, площади и доли в %, а также  отдельные карты плотности  и связанности элементов переднего плана</p>

<img src="Pict_4_18/22_s__fragmentation_alterr_data.png" width="80%" height="relative">
<br><span class="imgtitle">Рис. 18.32 Выходная таблица данных инструмента Fragmentation (Alternative)<br>

<div class="script_01">
<figure>
<img src="Pict_4_18/22_s__fragmentation_alterr_connectivity_map.png"  width="125%" height="relative"></a>
</figure>
<figure align=center>
<img src="Pict_4_18/22_s__fragmentation_alterr_connectivity_leg.png" width="30%" height="relative"></a> 
</figure>
</div>
<br><span class="imgtitle">Рис. 18.33 Фрагмент цветовой карты связанности connectivity и легенда</p>

<p>В <span class="blue">SAGA GIS</span> есть также специальный инструмент для моделирования динамики - двух противоположно направленных процессов  <span class="monospace">Expand|Расширения</span> <span class="monospace">Shrink|Cъеживания</span> для элементов переднего плана и фона, который так и называется <span class="blackbold">Shrink and Expand</span>. Процессы можно воспроизводить как по отдельности (скажем прогнозировать как изменится конфигурация ЗИ при застройке), так за один "прогон". Но, на наш взгляд, инструмент не добавляет "нового" знания, поскольку эти же процессы можно изучать просто изменяя параметры инструмента фрагментации.</p>



<footer id="main-footer">Пространственный анализ в геоэкологии &copy; Е.Ю.Колбовский, 2022 </footer>
</div class="content">
</body>
</html>

</body>
</html>